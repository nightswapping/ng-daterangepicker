"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="daterangepicker"),function(e,t,a){t.module("lodash",[]).factory("_",function(e){if(e._===a)throw new Error("lodash is not bound to window");return e._}),t.module("daterangepicker.directives",["lodash"]).factory("activeRange",function(e){var t={};return t.start_date=function(){return t.first_date&&t.second_date?e.min([t.first_date,t.second_date]):t.first_date},t.end_date=function(){return t.first_date&&t.second_date?e.max([t.first_date,t.second_date]):t.first_date},t.reset=function(){t.isPendingClick=!1,t.first_date=null,t.second_date=null,t.isLocked=!1},t.setDate=function(a){a=e.clone(a),t.isPendingClick===!0?t.second_date=a:(t.first_date=a,t.second_date=null)},t.reset(),t}).directive("daterangepicker",function(e,a,n,r,s){return{restrict:"AE",scope:{dateRanges:"=?",onDateClick:"=",defaultDate:"=",minDate:"=",maxDate:"=",weekStartsOn:"@",monthOnly:"@",startToday:"@"},templateUrl:function(e,t){return t.template},link:function(o,i,d){function c(e){var t=a.findRangesForDate(o.dateRanges,e),s=r.any(t,function(e){return e.disabled}),i=f?f&&e>f:!1;return s||h&&h>e||i||o.monthOnly&&n(e,"M")!==u.toString()}if(o.dateRanges=o.dateRanges||[],o.activeRange=s,o.onNewRange&&!(o.onNewRange instanceof Function))throw new Error("onNewRange is not a function");var u,l,g,h=o.minDate,f=o.maxDate,D=o.weekStartsOn||0,p=d.hasOwnProperty("noExtraRows");o.startToday&&"false"!==o.startToday&&(h=new Date),h&&(r.isDate(h)||(h=a.stringToDate(h)),h.setHours(0,0,0,0),l=new Date(h.getFullYear(),h.getMonth(),1),l.setHours(0,0,0,0)),f&&(r.isDate(f)||(f=a.stringToDate(f)),f.setHours(0,0,0,0),g=new Date(f.getFullYear(),f.getMonth(),1),g.setHours(0,0,0,0)),(!t.isNumber(D)||0>D||D>6)&&(D=0);var y=n(new Date,"yyyy-MM-dd"),v=o.defaultDate||new Date;v&&!r.isDate(v)&&(v=a.stringToDate(v)),o.startToday&&"false"!==o.startToday&&(v=new Date),v.setHours(0,0,0,0),o.dayNames=a.buildDayNames(D),o.currentDate=v,o.monthOnly=o.monthOnly||!1,o.render=function(e){u=e.getMonth()+1,e=new Date(e.getFullYear(),e.getMonth(),1),e.setHours(0,0,0,0),o.dates=a.buildDates(e,{weekStartsOn:D,noExtraRows:p});var t=new Date(e);t.setMonth(u),o.allowPrevMonth=!h||e>h,o.allowNextMonth=!f||f>=t;var n=new Date(e);n.setYear(e.getFullYear()-1);var r=new Date(e);r.setYear(e.getFullYear()+1),o.allowPrevYear=!h||n>=l,o.allowNextYear=!f||g>=r},o.render(v),o.mouseEnter=function(e){s.isLocked!==!0&&s.setDate(e)},o.mouseLeave=function(){s.isLocked!==!0&&s.setDate(null)},o.setDate=function(e){c(e)||(s.setDate(e),o.onDateClick(s))},o.getClass=function(e){var t=a.findRangesForDate(o.dateRanges,e),n=[],i=s.start_date()<=e&&e<=s.end_date(),d=!s.isPendingClick&&s.start_date()&&e===s.start_date();return(d||i)&&n.push("daterangepicker-selected"),n.push(c(e)?"daterangepicker-disabled":t.length>0?"daterangepicker-active":"daterangepicker-enabled"),t&&r.forEach(t,function(e){e.css_classes&&(n=r.union(n,e.css_classes.split(" ")))}),a.areDatesEqual(e,y)&&n.push("daterangepicker-today"),n.join(" ")},o.changeMonth=function(e){v.setDate(1),v.setMonth(v.getMonth()+e),o.render(v)},o.getI18nMonth=function(t){return e.months[t.getMonth()]},o.$on("$destroy",function(){s.reset()})}}}),t.module("daterangepicker.factories",[]).factory("daterangepickerUtils",function(e,t,a){return{findRangesForRange:function(e,t,n){var t=a.clone(t),n=a.clone(n);a.isDate(t)||(t=new Date(t)),a.isDate(n)||(n=new Date(n)),t.setHours(0,0,0,0),n.setHours(0,0,0,0),e=e||[];for(var r,s,o=[],i=0;i<e.length;i++)r=this.stringToDate(e[i].start_date),r.setHours(0,0,0,0),s=this.stringToDate(e[i].end_date),s.setHours(0,0,0,0),s>=t&&n>=r&&o.push(e[i]);return o},findRangesForDate:function(e,t){t.setHours(0,0,0,0),e=e||[];for(var a,n,r=[],s=0;s<e.length;s++)a=this.stringToDate(e[s].start_date),a.setHours(0,0,0,0),n=this.stringToDate(e[s].end_date),n.setHours(0,0,0,0),t>=a&&n>=t&&r.push(e[s]);return r},stringToDate:function(e){if(e){var t=e.split("-"),a=t[0],n=t[1],r=t[2];return new Date(a,n-1,r,3)}},dateToString:function(e){if(e){var t=e.getFullYear(),a=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();return t+"-"+a+"-"+n}},areDatesEqual:function(e,t){return a.isDate(e)&&(e=this.dateToString(e)),a.isDate(t)&&(t=this.dateToString(t)),e===t},buildDates:function(e,t){var a=[],n=new Date(e.getFullYear(),e.getMonth()+1,0,3);for(t=t||{},e=new Date(e);e.getDay()!==t.weekStartsOn;)e.setDate(e.getDate()-1);for(var r=0;42>r&&!(t.noExtraRows&&e.getDay()===t.weekStartsOn&&e>n);r++)a.push(new Date(e)),e.setDate(e.getDate()+1);return a},buildDayNames:function(e){var n=a.map(t.daysShort.slice(0,-1),function(e){return e});if(e){n=n.slice(0);for(var r=0;e>r;r++)n.push(n.shift())}return n},isRangeValid:function(e){if(!e||!e.length)return!0;var t=this;return a.map(e,function(e){if(t.dateToString(new Date(e.start_date))!==e.start_date||t.dateToString(new Date(e.end_date))!==e.end_date)throw new Error("Invalid date passed")}),!0}}}),t.module("daterangepicker",["daterangepicker.templates","daterangepicker.providers","daterangepicker.factories","daterangepicker.directives"]),t.module("daterangepicker.providers",[]).provider("calendarData",function(){var e={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"};return{setDays:function(t){e.days=t},setDaysShort:function(t){e.daysShort=t},setDaysMin:function(t){e.daysMin=t},setMonths:function(t){e.months=t},setMonthsShort:function(t){e.monthsShort=t},$get:function(){if(!e)throw new Error("You must set dates headers");return e}}}),t.module("daterangepicker.templates",[]).run(function(e){e.put("calendar/daterange_picker.html",'<div class="daterangepicker"><div class="daterangepicker-header"><div class="daterangepicker-controls"><div class="daterangepicker-month"><a href="" ng-click="changeMonth(-1)" ng-show="allowPrevMonth" translate="translate" class="daterangepicker-prevmonth"><i class="icon-chevron-left"></i></a><span>{{getI18nMonth(currentDate)}}</span><a href="" ng-click="changeMonth(1)" ng-show="allowNextMonth" translate="translate" class="daterangepicker-nextmonth"><i class="icon-chevron-right"></i></a></div><div class="daterangepicker-year"><a href="" ng-click="changeMonth(-12)" ng-show="allowPrevYear" class="daterangepicker-prevyear"><i class="icon-chevron-left"></i></a><span>{{currentDate | date:"yyyy"}}</span><a href="" ng-click="changeMonth(12)" ng-show="allowNextYear" class="daterangepicker-nextyear"><i class="icon-chevron-right"></i></a></div></div></div><div class="daterangepicker-body"><div class="daterangepicker-main"><ul class="daterangepicker-cell"><li ng-repeat="dayName in dayNames" class="daterangepicker-head">{{dayName}}</li></ul><ul class="daterangepicker-cell"><li ng-class="getClass(date)" ng-repeat="date in dates" ng-click="setDate(date)"g-mouseenter="mouseEnter(date)" ng-mouseleave="mouseLeave(date)"tartToday="true">{{date | date:"d"}}</li></ul></div></div></div>')})}(window,window.angular);