"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="clustered.map"),function(e,t){t.module("daterangepicker.directives",["lodash"]).factory("activeRange",function(e){var t={};return t.start_date=function(){return t.first_date&&t.second_date?e.min([t.first_date,t.second_date]):t.first_date},t.end_date=function(){return t.first_date&&t.second_date?e.max([t.first_date,t.second_date]):t.first_date},t.reset=function(){t.isPendingClick=!1,t.first_date=null,t.second_date=null,t.isLocked=!1},t.setDate=function(a){a=e.clone(a),t.isPendingClick===!0?t.second_date=a:t.first_date=a},t.reset(),t}).directive("daterangepicker",function(e,a,n,r,s){return{restrict:"AE",scope:{dateRanges:"=?",onDateClick:"=",defaultDate:"=",minDate:"=",maxDate:"=",weekStartsOn:"@",monthOnly:"@",startToday:"@"},templateUrl:function(e,t){return t.template},link:function(e,i,o){function d(t){var s=a.findRangesForDate(e.dateRanges,t),i=r.any(s,function(e){return e.disabled}),o=l?l&&t>l:!1;return i||u&&u>t||o||e.monthOnly&&n(t,"M")!==c.toString()}if(e.dateRanges=e.dateRanges||[],e.activeRange=s,e.onNewRange&&!(e.onNewRange instanceof Function))throw new Error("onNewRange is not a function");var c,u=e.minDate,l=e.maxDate,g=e.weekStartsOn||0,h=o.hasOwnProperty("noExtraRows");e.startToday&&"false"!==e.startToday&&(u=new Date),u&&!r.isDate(u)&&(u=a.stringToDate(u)),l&&!r.isDate(l)&&(l=a.stringToDate(l)),(!t.isNumber(g)||0>g||g>6)&&(g=0);var f=n(new Date,"yyyy-MM-dd"),D=e.defaultDate||new Date;D&&!r.isDate(D)&&(D=a.stringToDate(D)),e.startToday&&"false"!==e.startToday&&(D=new Date),e.dayNames=a.buildDayNames(g),e.currentDate=D,e.monthOnly=e.monthOnly||!1,e.render=function(t){t=new Date(t.getFullYear(),t.getMonth(),1,3),c=D.getMonth()+1,e.dates=a.buildDates(t,{weekStartsOn:g,noExtraRows:h});var n=new Date(t);n.setMonth(c),e.allowPrevMonth=!u||t>u,e.allowNextMonth=!l||l>=n},e.render(D),e.mouseEnter=function(e){s.isLocked!==!0&&s.setDate(e)},e.mouseLeave=function(){s.isLocked!==!0&&s.setDate(null)},e.setDate=function(t){d(t)||(s.setDate(t),e.onDateClick(s))},e.getClass=function(t){var n=a.findRangesForDate(e.dateRanges,t),i=[],o=s.start_date()<=t&&t<=s.end_date(),c=!s.isPendingClick&&s.start_date()&&t===s.start_date();return(c||o)&&i.push("daterangepicker-selected"),i.push(d(t)?"daterangepicker-disabled":n.length>0?"daterangepicker-active":"daterangepicker-enabled"),n&&r.forEach(n,function(e){e.css_classes&&(i=r.union(i,e.css_classes.split(" ")))}),a.areDatesEqual(t,f)&&i.push("daterangepicker-today"),i.join(" ")},e.changeMonth=function(t){D.setDate(1),D.setMonth(D.getMonth()+t),e.render(D)}}}}),t.module("daterangepicker.factories",[]).factory("daterangepickerUtils",function(e,t,a){return{findRangesForRange:function(e,t,n){var t=a.clone(t),n=a.clone(n);a.isDate(t)||(t=new Date(t)),a.isDate(n)||(n=new Date(n)),e=e||[];for(var r=[],s=0;s<e.length;s++)(t<=this.stringToDate(e[s].end_date)&&n>=this.stringToDate(e[s].start_date)||n>=this.stringToDate(e[s].start_date)&&t<=this.stringToDate(e[s].end_date))&&r.push(e[s]);return r},findRangesForDate:function(e,t){e=e||[];for(var a=[],n=0;n<e.length;n++)t>=this.stringToDate(e[n].start_date)&&t<=this.stringToDate(e[n].end_date)&&a.push(e[n]);return a},stringToDate:function(e){if(e){var t=e.split("-"),a=t[0],n=t[1],r=t[2];return new Date(a,n-1,r,3)}},dateToString:function(e){if(e){var t=e.getFullYear(),a=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();return t+"-"+a+"-"+n}},areDatesEqual:function(e,t){return a.isDate(e)&&(e=this.dateToString(e)),a.isDate(t)&&(t=this.dateToString(t)),e===t},buildDates:function(e,t){var a=[],n=new Date(e.getFullYear(),e.getMonth()+1,0,3);for(t=t||{},e=new Date(e);e.getDay()!==t.weekStartsOn;)e.setDate(e.getDate()-1);for(var r=0;42>r&&!(t.noExtraRows&&e.getDay()===t.weekStartsOn&&e>n);r++)a.push(new Date(e)),e.setDate(e.getDate()+1);return a},buildDayNames:function(e){var n=a.map(t.daysShort.slice(0,-1),function(e){return e});if(e){n=n.slice(0);for(var r=0;e>r;r++)n.push(n.shift())}return n},isRangeValid:function(e){if(!e||!e.length)return!0;var t=this;return a.map(e,function(e){if(t.dateToString(new Date(e.start_date))!==e.start_date||t.dateToString(new Date(e.end_date))!==e.end_date)throw new Error("Invalid date passed")}),!0}}}),t.module("daterangepicker",["daterangepicker.templates","daterangepicker.providers","daterangepicker.factories","daterangepicker.directives"]),t.module("daterangepicker.providers",[]).provider("calendarData",function(){var e={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"};return{setDays:function(t){e.days=t},setDaysShort:function(t){e.daysShort=t},setDaysMin:function(t){e.daysMin=t},setMonths:function(t){e.months=t},setMonthsShort:function(t){e.monthsShort=t},$get:function(){if(!e)throw new Error("You must set dates headers");return e}}}),t.module("daterangepicker.templates",[]).run(function(e){e.put("calendar/daterange_picker.html",'<div class="daterangepicker"><div class="daterangepicker-header"><div class="daterangepicker-controls"><div class="daterangepicker-month"><a href="" ng-click="changeMonth(-1)" ng-show="allowPrevMonth" translate="translate"lass="daterangepicker-prevmonth"><i class="icon-chevron-left"></i></a><span>{{getI18nMonth(currentDate)}}</span><a href="" ng-click="changeMonth(1)" ng-show="allowNextMonth" translate="translate"lass="daterangepicker-nextmonth"><i class="icon-chevron-right"></i></a></div><div class="daterangepicker-year"><a href="" ng-click="changeMonth(-12)" ng-show="allowPrevMonth"lass="daterangepicker-prevmonth"><i class="icon-chevron-left"></i></a><span>{{currentDate | date:"yyyy"}}</span><a href="" ng-click="changeMonth(12)" ng-show="allowNextMonth" class="daterangepicker-nextyear"><i class="icon-chevron-right"></i></a></div></div></div><div class="daterangepicker-body"><div class="daterangepicker-main"><ul class="daterangepicker-cell"><li ng-repeat="dayName in dayNames" class="daterangepicker-head">{{dayName}}</li></ul><ul class="daterangepicker-cell"><li ng-class="getClass(date)" ng-repeat="date in dates" ng-click="setDate(date)"g-mouseenter="mouseEnter(date)" ng-mouseleave="mouseLeave(date)"tartToday="true">{{date | date:"d"}}</li></ul></div></div></div>')})}(window,window.angular);