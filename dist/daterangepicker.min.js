"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="clustered.map"),function(e,t){t.module("daterangepicker.constants",[]).constant("calendarData",{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"}),t.module("daterangepicker.directives",["lodash"]).factory("activeRange",function(e){var t={};return t.start_date=function(){return t.first_date&&t.second_date?e.min([t.first_date,t.second_date]):t.first_date},t.end_date=function(){return t.first_date&&t.second_date?e.max([t.first_date,t.second_date]):t.first_date},t.reset=function(){t.isPendingClick=!1,t.first_date=null,t.second_date=null,t.isLocked=!1},t.setDate=function(a){a=e.clone(a),t.isPendingClick===!0?t.second_date=a:t.first_date=a},t.reset(),t}).directive("daterangepicker",function(e,a,n,r,s){return{restrict:"AE",scope:{dateRanges:"=?",onDateClick:"=",defaultDate:"=",minDate:"=",maxDate:"=",weekStartsOn:"@",monthOnly:"@",startToday:"@"},templateUrl:function(e,t){return t.template},link:function(e,o,i){function d(t){var s=a.findRangesForDate(e.dateRanges,t),o=r.any(s,function(e){return e.disabled});return o||c&&c>t||g&&t>g||e.monthOnly&&n(t,"M")!==u.toString()}if(e.dateRanges=e.dateRanges||[],e.activeRange=s,e.onNewRange&&!(e.onNewRange instanceof Function))throw new Error("onNewRange is not a function");var u,c=e.minDate,g=e.maxDate,l=e.weekStartsOn||0,D=i.hasOwnProperty("noExtraRows");e.startToday&&(c=new Date),c&&!r.isDate(c)&&(c=a.stringToDate(c)),g&&!r.isDate(g)&&(g=a.stringToDate(g)),(!t.isNumber(l)||0>l||l>6)&&(l=0);var f=n(new Date,"yyyy-MM-dd"),h=e.defaultDate||new Date;h&&!r.isDate(h)&&(h=a.stringToDate(h)),e.startToday&&(h=new Date),console.log("start",e.startToday,h),e.dayNames=a.buildDayNames(l),e.currentDate=h,console.log(e.currentDate),e.render=function(t){t=new Date(t.getFullYear(),t.getMonth(),1,3),u=h.getMonth()+1,e.dates=a.buildDates(t,{weekStartsOn:l,noExtraRows:D});var n=new Date(t);n.setMonth(u),e.allowPrevMonth=!c||t>c,e.allowNextMonth=!g||g>=n},e.render(h),e.mouseEnter=function(e){s.isLocked!==!0&&s.setDate(e)},e.mouseLeave=function(){s.isLocked!==!0&&s.setDate(null)},e.setDate=function(t){d(t)||(s.setDate(t),e.onDateClick(s))},e.getClass=function(t){var n=a.findRangesForDate(e.dateRanges,t),o=[],i=s.start_date()<=t&&t<=s.end_date(),u=!s.isPendingClick&&s.start_date()&&t===s.start_date();return(u||i)&&o.push("daterangepicker-selected"),o.push(d(t)?"daterangepicker-disabled":n.length>0?"daterangepicker-active":"daterangepicker-enabled"),n&&r.forEach(n,function(e){e.css_classes&&(o=r.union(o,e.css_classes.split(" ")))}),a.areDatesEqual(t,f)&&o.push("daterangepicker-today"),o.join(" ")},e.changeMonth=function(t){h.setDate(1),h.setMonth(h.getMonth()+t),e.render(h)}}}}),t.module("daterangepicker.factories",[]).factory("daterangepickerUtils",function(e,t,a){return{findRangesForRange:function(e,t,n){var t=a.clone(t),n=a.clone(n);a.isDate(t)||(t=new Date(t)),a.isDate(n)||(n=new Date(n)),e=e||[];for(var r=[],s=0;s<e.length;s++)(t<=this.stringToDate(e[s].end_date)&&n>=this.stringToDate(e[s].start_date)||n>=this.stringToDate(e[s].start_date)&&t<=this.stringToDate(e[s].end_date))&&r.push(e[s]);return r},findRangesForDate:function(e,t){e=e||[];for(var a=[],n=0;n<e.length;n++)t>=this.stringToDate(e[n].start_date)&&t<=this.stringToDate(e[n].end_date)&&a.push(e[n]);return a},stringToDate:function(e){if(e){var t=e.split("-"),a=t[0],n=t[1],r=t[2];return new Date(a,n-1,r,3)}},dateToString:function(e){if(e){var t=e.getFullYear(),a=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();return t+"-"+a+"-"+n}},areDatesEqual:function(e,t){return a.isDate(e)&&(e=this.dateToString(e)),a.isDate(t)&&(t=this.dateToString(t)),e===t},buildDates:function(e,t){var a=[],n=new Date(e.getFullYear(),e.getMonth()+1,0,3);for(t=t||{},e=new Date(e);e.getDay()!==t.weekStartsOn;)e.setDate(e.getDate()-1);for(var r=0;42>r&&!(t.noExtraRows&&e.getDay()===t.weekStartsOn&&e>n);r++)a.push(new Date(e)),e.setDate(e.getDate()+1);return a},buildDayNames:function(e){var n=a.map(t.daysShort.slice(0,-1),function(e){return e});if(e){n=n.slice(0);for(var r=0;e>r;r++)n.push(n.shift())}return n},isRangeValid:function(e){if(!e||!e.length)return!0;var t=this;return a.map(e,function(e){if(t.dateToString(new Date(e.start_date))!==e.start_date||t.dateToString(new Date(e.end_date))!==e.end_date)throw new Error("Invalid date passed")}),!0}}}),t.module("daterangepicker",["daterangepicker.constants","daterangepicker.factories","daterangepicker.directives"])}(window,window.angular);